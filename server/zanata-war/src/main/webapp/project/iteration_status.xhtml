<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    template="../WEB-INF/layout/template.xhtml">
   
 
    <ui:define name="center_content">
      <rich:jQuery selector="#tab_projects" query="addClass('ui-tabs-selected')" />
      <rich:panel id="iteration-status-panel">
        <f:facet name="header">#{messages['jsf.TranslationStatistics']}</f:facet>
		<h:messages />
		
        <h:form>
            <s:token allowMultiplePosts="true" />
		  <rich:dataTable id="data_table" width="100%" value="#{viewAllStatusAction.getAllStatus().toArray()}" 
                  var="stats"
                  styleClass="iteration_inline_tribes"
                  rowClasses="odd,even">
					<rich:column sortBy="#{stats.locale}">
						<f:facet name="header">#{messages['jsf.Language']}</f:facet>
						<h:outputLink
							  rendered="#{identity.loggedIn}"
					          value="#{request.contextPath}/webtrans/Application.html"
					          title="#{messages['jsf.iteration.stats.OpenInWebEditor']}">
							<f:param name="project" value="#{viewAllStatusAction.projectSlug}"/>
							<f:param name="iteration" value="#{viewAllStatusAction.iterationSlug}"/>
							<f:param name="localeId" value="#{stats.locale}"/>
							<f:param name="locale" value="#{locale.language}" />
		            		<h:outputText value="#{stats.locale}"/>
						</h:outputLink>
						<h:outputText value="#{stats.locale}" rendered="#{not identity.loggedIn}"/>
	        		</rich:column>
					<rich:column sortBy="#{stats.nativeName}">
						<f:facet name="header">#{messages['jsf.Name']}</f:facet>
						<h:outputLink
							  rendered="#{identity.loggedIn}"
					          value="#{request.contextPath}/webtrans/Application.html"
					          title="#{messages['jsf.iteration.stats.OpenInWebEditor']}">
							<f:param name="project" value="#{viewAllStatusAction.projectSlug}"/>
							<f:param name="iteration" value="#{viewAllStatusAction.iterationSlug}"/>
							<f:param name="localeId" value="#{stats.locale}"/>
							<f:param name="locale" value="#{locale.language}" />
		            		<h:outputText value="#{stats.nativeName}"/>
						</h:outputLink>
						<h:outputText value="#{stats.nativeName}" rendered="#{not identity.loggedIn}"/>
	        		</rich:column>
	        	<rich:column sortBy="#{stats.per}">
	        	  <f:facet name="header">Percentage</f:facet>
                  <ui:param name="tstatus" value="#{stats.words}" />
                  <ui:include src="../WEB-INF/layout/statsbar.xhtml">
                    <ui:param name="status" value="#{tstatus}" />
                  </ui:include>
                </rich:column>
    
				<rich:column>
					<f:facet name="header">Approved (words)</f:facet>
					#{stats.words.approved}
	        		</rich:column>
				<rich:column>
					<f:facet name="header">Need Review (words)</f:facet>
					#{stats.words.needReview}
	        		</rich:column>
				<rich:column>
					<f:facet name="header">Untranslated (words)</f:facet>
					#{stats.words.untranslated}
	        		</rich:column>
  		  </rich:dataTable>
        </h:form>              
      </rich:panel>
    </ui:define>
    
  </ui:composition>
