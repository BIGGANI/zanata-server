<s:fragment
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:ui="http://java.sun.com/jsf/facelets">

  <div class="l--push-top-half form__item">
    <h:outputLabel for="name">#{messages['jsf.Name']}
      <s:span styleClass="txt--required">*</s:span>
    </h:outputLabel>
    <s:decorate id="nameField" template="../field.xhtml" enclose="true">
      <h:inputText id="name" value="#{profileAction.name}" required="true"
        maxlength="80">
        <a4j:ajax event="blur" render="nameField" execute="@this"/>
      </h:inputText>
    </s:decorate>
  </div>

  <ui:remove>
    <!-- User name field is only shown for new users (otherwise they aren't allowed to edit the user name) -->
  </ui:remove>
  <s:div styleClass="l--push-top-half form__item"
    rendered="#{profileAction.newUser}">
    <h:outputLabel for="username">#{messages['jsf.Username']}
      <s:span styleClass="txt--required">*</s:span>
    </h:outputLabel>
    <s:decorate id="usernameField" template="../field.xhtml" enclose="true">
      <h:inputText id="username" required="true" maxlength="80"
        value="#{profileAction.username}">
        <a4j:ajax event="blur" render="usernameField" execute="@this"/>
      </h:inputText>
    </s:decorate>
  </s:div>

  <div class="l--push-top-half form__item">
    <h:outputLabel for="email">
      #{messages['jsf.Email']}
    </h:outputLabel>
    <s:decorate id="emailField" template="../field.xhtml">
      <h:inputText id="email" required="false"
        value="#{profileAction.email}">
        <a4j:ajax event="blur" render="emailField" execute="@this"/>
      </h:inputText>
    </s:decorate>
  </div>
</s:fragment>
